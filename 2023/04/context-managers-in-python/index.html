<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <script type="application/ld+json">

{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "What are Context Managers in Python",
  
  "image": "//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/arno-smit-qY_yTu7YBT4-unsplash.jpg",
  
  "datePublished": "2023-04-02T00:00:00Z",
  "dateModified": "2023-04-02T00:00:00Z",
  "author": {
    "@type": "Person",
    "name": "aaron",
    
    "image": "https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.2/img/icons/plane-icon.png"
    
  },
  "mainEntityOfPage": { 
    "@type": "WebPage",
    "@id": "https:\/\/www.aaronnotes.com\/2023\/04\/context-managers-in-python\/" 
  },
  "publisher": {
    "@type": "Organization",
    "name": "aaron's notes",
    
    "logo": {
      "@type": "ImageObject",
      "url": "https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.2/img/icons/plane-icon.png"
    }
    
  },
  "description": "In Python, context managers are a powerful tool for managing resources such as files, sockets, and locks. While Python provides built-in context managers such as with open() as f: for working with files, you can also define your own context managers using the contextlib module. In this post, I\u0026rsquo;ll explore how to define your own context managers in Python.\n",
  "keywords": []
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.111.3 with theme Tranquilpeak 0.5.3-BETA">
<meta name="author" content="aaron">
<meta name="keywords" content="">
<meta name="description" content="In Python, context managers are a powerful tool for managing resources such as files, sockets, and locks. While Python provides built-in context managers such as with open() as f: for working with files, you can also define your own context managers using the contextlib module. In this post, I&rsquo;ll explore how to define your own context managers in Python.">


<meta property="og:description" content="In Python, context managers are a powerful tool for managing resources such as files, sockets, and locks. While Python provides built-in context managers such as with open() as f: for working with files, you can also define your own context managers using the contextlib module. In this post, I&rsquo;ll explore how to define your own context managers in Python.">
<meta property="og:type" content="article">
<meta property="og:title" content="What are Context Managers in Python">
<meta name="twitter:title" content="What are Context Managers in Python">
<meta property="og:url" content="https://www.aaronnotes.com/2023/04/context-managers-in-python/">
<meta property="twitter:url" content="https://www.aaronnotes.com/2023/04/context-managers-in-python/">
<meta property="og:site_name" content="aaron&#39;s notes">
<meta property="og:description" content="In Python, context managers are a powerful tool for managing resources such as files, sockets, and locks. While Python provides built-in context managers such as with open() as f: for working with files, you can also define your own context managers using the contextlib module. In this post, I&rsquo;ll explore how to define your own context managers in Python.">
<meta name="twitter:description" content="In Python, context managers are a powerful tool for managing resources such as files, sockets, and locks. While Python provides built-in context managers such as with open() as f: for working with files, you can also define your own context managers using the contextlib module. In this post, I&rsquo;ll explore how to define your own context managers in Python.">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2023-04-02T00:00:00">
  
  
    <meta property="article:modified_time" content="2023-04-02T00:00:00">
  
  
  
    
      <meta property="article:section" content="python">
    
  
  
    
      <meta property="article:tag" content="python">
    
      <meta property="article:tag" content="context manager">
    
      <meta property="article:tag" content="generator">
    
      <meta property="article:tag" content="decorator">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@jiaqingli">


  <meta name="twitter:creator" content="@jiaqingli">






  <meta property="og:image" content="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.2/img/icons/plane-icon.png">
  <meta property="twitter:image" content="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.2/img/icons/plane-icon.png">




  <meta property="og:image" content="//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/arno-smit-qY_yTu7YBT4-unsplash.jpg">
  <meta property="twitter:image" content="//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/arno-smit-qY_yTu7YBT4-unsplash.jpg">


  <meta property="og:image" content="//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/arno-smit-qY_yTu7YBT4-unsplash.jpg">
  <meta property="twitter:image" content="//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/arno-smit-qY_yTu7YBT4-unsplash.jpg">


    <title>What are Context Managers in Python</title>

    <link rel="icon" href="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/icons/nugget.jpg">
    

    

    <link rel="canonical" href="https://www.aaronnotes.com/2023/04/context-managers-in-python/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://www.aaronnotes.com/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css" />
    
    

    
      
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6F8KMZN49C"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-6F8KMZN49C', { 'anonymize_ip': false });
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.aaronnotes.com/" aria-label="Go to homepage">aaron&#39;s notes</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://www.aaronnotes.com/#about" aria-label="Open the link: /#about">
    
    
    
      
        <img class="header-picture" src="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.2/img/icons/plane-icon.png" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.aaronnotes.com/#about" aria-label="Read more about the author">
          <img class="sidebar-profile-picture" src="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.2/img/icons/plane-icon.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">aaron</h4>
        
          <h5 class="sidebar-profile-bio">random notes</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/" title="Home">
    
      <i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/categories" title="Categories">
    
      <i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/tags" title="Tags">
    
      <i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/archives" title="Archives">
    
      <i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/index.xml" title="RSS">
    
      <i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/lijqhs" target="_blank" rel="noopener" title="GitHub">
    
      <i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/algorithms-notes" title="Algo Notes">
    
      <i class="sidebar-button-icon fas fa-lg fa-leaf" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Algo Notes</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/deeplearning-notes" title="DL Notes">
    
      <i class="sidebar-button-icon fas fa-lg fa-magic" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">DL Notes</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/data-science-notes" title="DS Notes">
    
      <i class="sidebar-button-icon fas fa-lg fa-cube" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">DS Notes</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/#about" title="About">
    
      <i class="sidebar-button-icon fas fa-lg fa-rocket" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              "
       style="background-image:url('//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/arno-smit-qY_yTu7YBT4-unsplash.jpg')"
       data-behavior="4">
    
      <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title">
      What are Context Managers in Python
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2023-04-02T00:00:00Z">
        
  April 2, 2023

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.aaronnotes.com/categories/python">python</a>
    
  

  </div>

</div>
    
  </div>


      <div id="main" data-behavior="4"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" id="top">
          
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>In Python, context managers are a powerful tool for managing resources such as files, sockets, and locks. While Python provides built-in context managers such as <code>with open() as f:</code> for working with files, you can also define your own context managers using the <code>contextlib</code> module. In this post, I&rsquo;ll explore how to define your own context managers in Python.</p>
<h1 id="table-of-contents">Table of Contents</h1>
<nav id="TableOfContents">
  <ul>
    <li><a href="#what-are-context-managers">What are Context Managers?</a></li>
    <li><a href="#how-to-use-context-managers">How to Use Context Managers</a>
      <ul>
        <li><a href="#using-the-with-statement">Using the <code>with</code> Statement</a></li>
        <li><a href="#example-file-io">Example: File I/O</a></li>
        <li><a href="#other-use-cases">Other Use Cases</a></li>
      </ul>
    </li>
    <li><a href="#how-to-implement-context-managers-in-python">How to Implement Context Managers in Python</a>
      <ul>
        <li><a href="#defining-context-manager-as-a-class">Defining context manager as a class</a>
          <ul>
            <li><a href="#example-timer">Example: Timer</a></li>
            <li><a href="#example-suppress-exceptions">Example: Suppress Exceptions</a></li>
            <li><a href="#example-managing-database-connection-using-context-manager">Example: Managing database connection using context manager</a></li>
          </ul>
        </li>
        <li><a href="#defining-a-context-manager-function">Defining a Context Manager Function</a>
          <ul>
            <li><a href="#example-managing-threads-using-context-manager">Example: Managing threads using context manager</a></li>
            <li><a href="#example-managing-threads-using-context-manager-2">Example: Managing threads using context manager 2</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>

<h2 id="what-are-context-managers">What are Context Managers?</h2>
<p>A context manager is simply a Python object that defines two methods: <code>__enter__</code> and <code>__exit__</code>. The <code>__enter__</code> method is called when a block of code is entered, and the <code>__exit__</code> method is called when the block of code is exited. The purpose of a context manager is to provide a clean and safe way to manage resources that need to be acquired and released.</p>
<p>For example, let&rsquo;s say you want to open a file and read its contents. Normally, you would open the file using the <code>open()</code> function, read its contents, and then close the file using the <code>close()</code> method. However, if an exception occurs while you&rsquo;re reading the file, the <code>close()</code> method may not be called, leaving the file open and potentially causing problems. Using a context manager, you can ensure that the file is always closed, even if an exception occurs.</p>
<h2 id="how-to-use-context-managers">How to Use Context Managers</h2>
<h3 id="using-the-with-statement">Using the <code>with</code> Statement</h3>
<p>The most common way to use a context manager is by using the <code>with</code> statement. The <code>with</code> statement enables us to use context managers. The general format is:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">with</span> context_manager <span style="color:#66d9ef">as</span> target:
</span></span><span style="display:flex;"><span>    with_block
</span></span></code></pre></div><p>This will call <code>__enter__()</code> on context_manager, binding the result to target. The <code>with_block</code> is then executed. Finally, <code>__exit__()</code> is called on context_manager.</p>
<h3 id="example-file-io">Example: File I/O</h3>
<p>A common example is opening a file. We can do:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;file.txt&#39;</span>, <span style="color:#e6db74">&#39;r&#39;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>    content <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
</span></span><span style="display:flex;"><span><span style="color:#75715e"># f is automatically closed here    </span>
</span></span></code></pre></div><p>In this example, the <code>open()</code> function returns a file object that acts as a context manager.</p>
<ul>
<li>When the <code>with</code> statement is executed, the <code>__enter__</code> method is called, which opens the file.</li>
<li>Then, the code inside the <code>with</code> block is executed, which reads the file contents into the <code>content</code> variable. Finally, the <code>__exit__</code> method is called, which closes the file.</li>
<li>If an exception occurs inside the <code>with</code> block, the <code>__exit__</code> method is still called, ensuring that the file is closed.</li>
</ul>
<p>This is much cleaner than:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>f <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#39;file.txt&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span>: 
</span></span><span style="display:flex;"><span>    read_data <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read() 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">finally</span>:
</span></span><span style="display:flex;"><span>    f<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><h3 id="other-use-cases">Other Use Cases</h3>
<p>Except managing file resources, other examples of context managers include:</p>
<ul>
<li>locking resources,</li>
<li>managing socket resources,</li>
<li>timing code blocks,</li>
<li>temporarily modifying environment variables,</li>
<li>connecting database,</li>
<li>managing thread resources,</li>
<li>managing resources that require initialization and cleanup, such as hardware devices,third-party libraries, and more.</li>
</ul>
<p>Context managers provide a simple way to setup and teardown resources precisely and robustly, which can be used with a wide range of resources to improve the reliability and maintainability of your code.</p>
<h2 id="how-to-implement-context-managers-in-python">How to Implement Context Managers in Python</h2>
<h3 id="defining-context-manager-as-a-class">Defining context manager as a class</h3>
<p>A context manager is any object that implements the context manager protocol by defining <code>__enter__()</code> and <code>__exit__()</code> methods. The <code>__enter__()</code> method is called when entering the context, and should return an object bound to the target of the as clause in the with statement. The <code>__exit__()</code> method is called when leaving the context, and handles any exception that occurred in the block.</p>
<p>The most common way to define a context manager in Python is by defining a class with <code>__enter__</code> and <code>__exit__</code> methods. Here&rsquo;s an example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyContextManager</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Constructor code here</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __enter__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Enter code here</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __exit__(self, exc_type, exc_value, traceback):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Exit code here</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Usage</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> MyContextManager() <span style="color:#66d9ef">as</span> cm:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Code to use context manager here</span>
</span></span></code></pre></div><p>In this example, we define a class called <code>MyContextManager</code> with <code>__enter__</code> and <code>__exit__</code> methods.</p>
<ul>
<li>The <code>__init__</code> method is optional and can be used to initialize the context manager.</li>
<li>The <code>__enter__</code> method is called when the <code>with</code> statement is executed, and should return the context manager object.</li>
<li>The <code>__exit__</code> method is called when the <code>with</code> block is exited, and should clean up any resources that were acquired by the context manager.</li>
</ul>
<h4 id="example-timer">Example: Timer</h4>
<p>For example, here&rsquo;s a context manager that times a block of code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Timer</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __enter__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>start <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>time()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __exit__(self, exc_type, exc_val, exc_tb):
</span></span><span style="display:flex;"><span>        print(time<span style="color:#f92672">.</span>time() <span style="color:#f92672">-</span> self<span style="color:#f92672">.</span>start)
</span></span></code></pre></div><p>You can use this context manager like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">with</span> Timer() <span style="color:#66d9ef">as</span> timer:
</span></span><span style="display:flex;"><span>    do_something()  <span style="color:#75715e"># Runs for 1 second</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Prints 1.0</span>
</span></span></code></pre></div><h4 id="example-suppress-exceptions">Example: Suppress Exceptions</h4>
<p>Here is another simple example to define context manager as a class. The <code>__exit__()</code> method handles exceptions raised in the block. We can choose to suppress exceptions by returning <code>True</code>, or re-raise them by returning <code>False</code> or any other non-True value. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SuppressException</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __exit__(self, exc_type, exc_val, exc_tb):
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#39;Suppressing exception!&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> SuppressException():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span>(<span style="color:#e6db74">&#39;Error!&#39;</span>)  <span style="color:#75715e"># Exception raised but suppressed! </span>
</span></span></code></pre></div><h4 id="example-managing-database-connection-using-context-manager">Example: Managing database connection using context manager</h4>
<p>Here&rsquo;s an example of implementing a context manager to connect to a database using a class:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> mysql.connector
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DBConnection</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, user, password, host, database):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>user <span style="color:#f92672">=</span> user
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>password <span style="color:#f92672">=</span> password
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>host <span style="color:#f92672">=</span> host
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>database <span style="color:#f92672">=</span> database
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __enter__(self):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>conn <span style="color:#f92672">=</span> mysql<span style="color:#f92672">.</span>connector<span style="color:#f92672">.</span>connect(user<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>user, password<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>password, 
</span></span><span style="display:flex;"><span>                                           host<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>host, database<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>database)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>cursor <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>conn<span style="color:#f92672">.</span>cursor()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>cursor
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __exit__(self, exc_type, exc_val, exc_tb):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>conn<span style="color:#f92672">.</span>commit()
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>cursor<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>conn<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Usage: </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> DBConnection(user<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;john&#39;</span>, password<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pwd&#39;</span>, host<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;localhost&#39;</span>, database<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;mydb&#39;</span>) <span style="color:#66d9ef">as</span> cursor:
</span></span><span style="display:flex;"><span>    cursor<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">&#39;SELECT * FROM employees&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> row <span style="color:#f92672">in</span> cursor:
</span></span><span style="display:flex;"><span>        print(row) 
</span></span></code></pre></div><p>This context manager, <code>DBConnection</code>, handles connecting to a MySQL database, creating a cursor, and then committing changes, closing the cursor and connection upon exiting the with block.</p>
<p>We can use it as a context manager by instantiating the class and using it in a <code>with</code> statement. The <code>__enter__</code> method returns the database cursor, allowing us to use it to query the database. Then <code>__exit__</code> handles committing changes and properly closing connections even if an exception occurs.</p>
<p>Without a context manager, we&rsquo;d have to do this logic explicitly:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>conn <span style="color:#f92672">=</span> mysql<span style="color:#f92672">.</span>connector<span style="color:#f92672">.</span>connect(user<span style="color:#f92672">=</span>user, password<span style="color:#f92672">=</span>password, host<span style="color:#f92672">=</span>host, database<span style="color:#f92672">=</span>database) 
</span></span><span style="display:flex;"><span>cursor <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>cursor()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">try</span>: 
</span></span><span style="display:flex;"><span>    cursor<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">&#39;SELECT * FROM employees&#39;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># ... </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span>:
</span></span><span style="display:flex;"><span>    conn<span style="color:#f92672">.</span>rollback()  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">finally</span>:
</span></span><span style="display:flex;"><span>    cursor<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>    conn<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><h3 id="defining-a-context-manager-function">Defining a Context Manager Function</h3>
<p>In addition to defining a context manager class, we can decorate a generator function to turn it into a context manager with the <code>@contextmanager</code> decorator from <a href="https://docs.python.org/3/library/contextlib.html"><code>contextlib</code></a>, which is a module provides utilities for common tasks involving the <code>with</code> statement.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> contextlib <span style="color:#f92672">import</span> contextmanager
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@contextmanager</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">my_context_manager</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Enter code here</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">finally</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Exit code here</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">pass</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Usage</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> my_context_manager():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Code to use context manager here</span>
</span></span></code></pre></div><p>In this example, we define a context manager function called <code>my_context_manager</code> using the <code>@contextmanager</code> decorator.</p>
<ul>
<li>The <code>@contextmanager</code> decorator &ldquo;magically&rdquo; turns the generator function into a context manager by handling the entry and exit in accordance with the context manager protocol.</li>
<li>Inside the function, we define the code to execute when the <code>with</code> block is entered, and use the <code>yield</code> statement to indicate where the code inside the <code>with</code> block should be executed.</li>
<li>Finally, we define the code to execute when the <code>with</code> block is exited inside a <code>finally</code> block.</li>
</ul>
<h4 id="example-managing-threads-using-context-manager">Example: Managing threads using context manager</h4>
<p>Below is an example of defining a context manager to manage threads using a generator function and <code>@contextmanager</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> contextlib <span style="color:#f92672">import</span> contextmanager
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> threading
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@contextmanager</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">thread_manager</span>():
</span></span><span style="display:flex;"><span>    thread <span style="color:#f92672">=</span> threading<span style="color:#f92672">.</span>current_thread()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> thread
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">finally</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">del</span> thread
</span></span></code></pre></div><p>We define a context manager using the <code>@contextmanager</code> decorator. The <code>thread_manager</code> function is a generator that yields the current thread object using the <code>threading.current_thread()</code> method. When the <code>with</code> block is exited, the <code>finally</code> block is executed to delete the thread object.</p>
<p>To use this context manager, we can wrap our thread operations in a <code>with</code> block:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">print_thread_name</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">with</span> thread_manager() <span style="color:#66d9ef">as</span> thread:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Thread ID: </span><span style="color:#e6db74">{</span>thread<span style="color:#f92672">.</span>ident<span style="color:#e6db74">}</span><span style="color:#e6db74">, Name: </span><span style="color:#e6db74">{</span>thread<span style="color:#f92672">.</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>thread1 <span style="color:#f92672">=</span> threading<span style="color:#f92672">.</span>Thread(target<span style="color:#f92672">=</span>print_thread_name, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Thread 1&#34;</span>)
</span></span><span style="display:flex;"><span>thread2 <span style="color:#f92672">=</span> threading<span style="color:#f92672">.</span>Thread(target<span style="color:#f92672">=</span>print_thread_name, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Thread 2&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>thread1<span style="color:#f92672">.</span>start()
</span></span><span style="display:flex;"><span>thread2<span style="color:#f92672">.</span>start()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>thread1<span style="color:#f92672">.</span>join()
</span></span><span style="display:flex;"><span>thread2<span style="color:#f92672">.</span>join()
</span></span></code></pre></div><ul>
<li>We define a function <code>print_thread_name</code> that prints the ID and name of the current thread.</li>
<li>Within the function, we use the <code>with</code> block to create a context using the <code>thread_manager</code> context manager. We then start two threads <code>thread1</code> and <code>thread2</code> that call the <code>print_thread_name</code> function.</li>
<li>When the threads are joined, the context is exited and the thread objects are deleted.</li>
</ul>
<p>When we run this code, we should see output similar to the following:</p>
<pre tabindex="0"><code>Thread ID: 123145380864000, Name: Thread 1
Thread ID: 123145380864000, Name: Thread 2
</code></pre><p>In this output, we can see that both threads have the same ID and are using the names &ldquo;Thread 1&rdquo; and &ldquo;Thread 2&rdquo; respectively. This demonstrates that the context manager is successfully managing the threads.</p>
<h4 id="example-managing-threads-using-context-manager-2">Example: Managing threads using context manager 2</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> contextlib <span style="color:#f92672">import</span> contextmanager
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> threading
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@contextmanager</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">thread_manager</span>():
</span></span><span style="display:flex;"><span>    thread <span style="color:#f92672">=</span> threading<span style="color:#f92672">.</span>Thread(target<span style="color:#f92672">=</span>do_something)
</span></span><span style="display:flex;"><span>    thread<span style="color:#f92672">.</span>start()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">finally</span>:
</span></span><span style="display:flex;"><span>        thread<span style="color:#f92672">.</span>join()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">do_something</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;Doing something&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Usage:</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> thread_manager():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#39;Doing other things&#39;</span>)
</span></span></code></pre></div><p>This context manager starts a new thread that runs the <code>do_something()</code> function. Then, it yields control to the body of the <code>with</code> statement. Finally, after exiting the <code>with</code> block, it joins the thread to wait for it to complete.</p>
<p>So the full logic looks like this:</p>
<ol>
<li>Start a new thread to run <code>do_something()</code></li>
<li>Yield control to the with block</li>
<li>Run logic in the <code>with</code> block</li>
<li>Upon exiting <code>with</code> block, join the thread</li>
<li>Thread completes</li>
</ol>
<p>Without the context manager, we&rsquo;d have to remember to properly join the thread to avoid issues:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>thread <span style="color:#f92672">=</span> threading<span style="color:#f92672">.</span>Thread(target<span style="color:#f92672">=</span>do_something)
</span></span><span style="display:flex;"><span>thread<span style="color:#f92672">.</span>start()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Do other things...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Make sure to join the thread! </span>
</span></span><span style="display:flex;"><span>thread<span style="color:#f92672">.</span>join() 
</span></span></code></pre></div><p>If we forgot to join the thread, it would continue running in the background even after our main program exits. So the context manager encapsulates this logic to ensure the thread is always properly cleaned up. Even if an exception occurs in the <code>with</code> block, the thread will still be joined.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Context managers are a great way to ensure setup/teardown logic is executed correctly, especially in more complex cases. For something as potentially tricky as thread management, a context manager helps make the usage very clean while handling edge cases behind the scenes.</p>
              


            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/python/">python</a>

  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/context-manager/">context manager</a>

  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/generator/">generator</a>

  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/decorator/">decorator</a>

                  </div>
                
              
            
            
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://www.aaronnotes.com/2023/04/redis-memory-overcommit/" data-tooltip="Docker启动Redis, Low Memory Warning处理方法" aria-label="NEXT: Docker启动Redis, Low Memory Warning处理方法">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://www.aaronnotes.com/2023/04/zsh-oh-my-zsh/" data-tooltip="Zsh, Oh My Zsh" aria-label="PREVIOUS: Zsh, Oh My Zsh">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.aaronnotes.com/2023/04/context-managers-in-python/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://www.aaronnotes.com/2023/04/context-managers-in-python/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.aaronnotes.com/2023/04/context-managers-in-python/" title="Share on Linkedin" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.reddit.com/submit?url=https://www.aaronnotes.com/2023/04/context-managers-in-python/" title="Share on Reddit" aria-label="Share on Reddit">
          <i class="fab fa-reddit" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


            
  
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
    <script type="text/javascript">
      var disqus_config = function() {
        this.page.url = 'https:\/\/www.aaronnotes.com\/2023\/04\/context-managers-in-python\/';
        
          this.page.identifier = '\/2023\/04\/context-managers-in-python\/'
        
      };
      (function() {
        
        
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
          document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
          return;
        }
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'lijqhs';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  


          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2023 aaron. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://www.aaronnotes.com/2023/04/redis-memory-overcommit/" data-tooltip="Docker启动Redis, Low Memory Warning处理方法" aria-label="NEXT: Docker启动Redis, Low Memory Warning处理方法">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://www.aaronnotes.com/2023/04/zsh-oh-my-zsh/" data-tooltip="Zsh, Oh My Zsh" aria-label="PREVIOUS: Zsh, Oh My Zsh">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.aaronnotes.com/2023/04/context-managers-in-python/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://www.aaronnotes.com/2023/04/context-managers-in-python/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.aaronnotes.com/2023/04/context-managers-in-python/" title="Share on Linkedin" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.reddit.com/submit?url=https://www.aaronnotes.com/2023/04/context-managers-in-python/" title="Share on Reddit" aria-label="Share on Reddit">
          <i class="fab fa-reddit" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


      </div>
      
<div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-times"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.aaronnotes.com%2F2023%2F04%2Fcontext-managers-in-python%2F" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fwww.aaronnotes.com%2F2023%2F04%2Fcontext-managers-in-python%2F" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.aaronnotes.com%2F2023%2F04%2Fcontext-managers-in-python%2F" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i><span>Share on Linkedin</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.reddit.com/submit?url=https%3A%2F%2Fwww.aaronnotes.com%2F2023%2F04%2Fcontext-managers-in-python%2F" aria-label="Share on Reddit">
          <i class="fab fa-reddit" aria-hidden="true"></i><span>Share on Reddit</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>


    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.2/img/icons/plane-icon.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">aaron</h4>
    
      <div id="about-card-bio">random notes</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        software developer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker-alt"></i>
        <br/>
        canada
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://www.aaronnotes.com/images/cover.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js" integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://www.aaronnotes.com/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js"></script>


  
    <script async crossorigin="anonymous" defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js"></script>
  


<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      CommonHTML: { linebreaks: { automatic: true } },
      tex2jax: { inlineMath: [ ['$', '$'], ['\\(','\\)'] ], displayMath: [ ['$$','$$'], ['\\[', '\\]'] ], processEscapes: false },
      messageStyle: 'none'
    });
  </script>



    
  </body>
</html>

