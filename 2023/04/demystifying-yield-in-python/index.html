<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <script type="application/ld+json">

{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Demystifying Yield in Python",
  
  "image": "//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/1/ales-krivec-okzxVsJNxXc-unsplash.jpg",
  
  "datePublished": "2023-04-22T00:00:00Z",
  "dateModified": "2023-04-22T00:00:00Z",
  "author": {
    "@type": "Person",
    "name": "aaron",
    
    "image": "https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5/img/icons/boat.jpg"
    
  },
  "mainEntityOfPage": { 
    "@type": "WebPage",
    "@id": "https:\/\/www.aaronnotes.com\/2023\/04\/demystifying-yield-in-python\/" 
  },
  "publisher": {
    "@type": "Organization",
    "name": "aaron's notes",
    
    "logo": {
      "@type": "ImageObject",
      "url": "https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5/img/icons/boat.jpg"
    }
    
  },
  "description": "Python\u0026rsquo;s yield statement is a powerful tool that can be used in a variety of contexts, including generator functions, coroutines, and asynchronous programming.\n",
  "keywords": []
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.111.3 with theme Tranquilpeak 0.5.3-BETA">
<meta name="author" content="aaron">
<meta name="keywords" content="">
<meta name="description" content="Python&rsquo;s yield statement is a powerful tool that can be used in a variety of contexts, including generator functions, coroutines, and asynchronous programming.">


<meta property="og:description" content="Python&rsquo;s yield statement is a powerful tool that can be used in a variety of contexts, including generator functions, coroutines, and asynchronous programming.">
<meta property="og:type" content="article">
<meta property="og:title" content="Demystifying Yield in Python">
<meta name="twitter:title" content="Demystifying Yield in Python">
<meta property="og:url" content="https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/">
<meta property="twitter:url" content="https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/">
<meta property="og:site_name" content="aaron&#39;s notes">
<meta property="og:description" content="Python&rsquo;s yield statement is a powerful tool that can be used in a variety of contexts, including generator functions, coroutines, and asynchronous programming.">
<meta name="twitter:description" content="Python&rsquo;s yield statement is a powerful tool that can be used in a variety of contexts, including generator functions, coroutines, and asynchronous programming.">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2023-04-22T00:00:00">
  
  
    <meta property="article:modified_time" content="2023-04-22T00:00:00">
  
  
  
    
      <meta property="article:section" content="python">
    
  
  
    
      <meta property="article:tag" content="python">
    
      <meta property="article:tag" content="yield">
    
      <meta property="article:tag" content="generator">
    
      <meta property="article:tag" content="coroutine">
    
      <meta property="article:tag" content="asyncio">
    
      <meta property="article:tag" content="async">
    
      <meta property="article:tag" content="asynchronous programming">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@jiaqingli">


  <meta name="twitter:creator" content="@jiaqingli">






  <meta property="og:image" content="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5/img/icons/boat.jpg">
  <meta property="twitter:image" content="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5/img/icons/boat.jpg">




  <meta property="og:image" content="//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/1/ales-krivec-okzxVsJNxXc-unsplash.jpg">
  <meta property="twitter:image" content="//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/1/ales-krivec-okzxVsJNxXc-unsplash.jpg">


  <meta property="og:image" content="//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/1/ales-krivec-okzxVsJNxXc-unsplash.jpg">
  <meta property="twitter:image" content="//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/1/ales-krivec-okzxVsJNxXc-unsplash.jpg">


    <title>Demystifying Yield in Python</title>

    <link rel="icon" href="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/icons/nugget.jpg">
    <link rel="apple-touch-icon" href="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/icons/nugget.jpg">
    <link rel="safari_pinned_tab" href="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/icons/nugget.jpg">
    

    

    <link rel="canonical" href="https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://www.aaronnotes.com/css/style-c15f9dbce95111ed96856c96cfde1fd911c88340e95211ed94146c96cfde1fd9.min.css" />
    
    

    
      
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6F8KMZN49C"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-6F8KMZN49C', { 'anonymize_ip': false });
}
</script>

    
    <script>
    function setTheme(themeName) {
        if(themeName === 'dark') {
            document.documentElement.classList.remove('theme--light');
            document.documentElement.classList.add('theme--dark');
        }
        else {
            document.documentElement.classList.remove('theme--dark');
            document.documentElement.classList.add('theme--light');
        }

        localStorage.setItem('theme', themeName);
        document.documentElement.setAttribute('data-theme', themeName);
    }

    var currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;

    
    if (currentTheme) {
        if (currentTheme === 'dark') {
            setTheme('dark');
        } else {
            setTheme('light');
        }
    }
    else {
        
        if (window.matchMedia("(prefers-color-scheme: dark)")){
            setTheme('dark');
        }
        else if (window.matchMedia("(prefers-color-scheme: light)")){
            setTheme('light');
        }
        else {
            
            setTheme('dark');
        }
    }

    var mqDark = window.matchMedia('(prefers-color-scheme: dark)');
    var mqLight = window.matchMedia('(prefers-color-scheme: light)');
    
    function checkTheme(event) {
        if (event.matches) {
            if (event.media.includes('dark')) {
                setTheme('dark');
                document.getElementById('slider').checked = false;
            }
            if (event.media.includes('light')) {
                setTheme('light');
                document.getElementById('slider').checked = true;
            }
        }
    }
    
    try {
      mqDark.addEventListener('change', checkTheme);
      mqLight.addEventListener('change', checkTheme);
    } catch (maybeSafari) {
      try {
        mqDark.addListener(checkTheme);
        mqLight.addListener(checkTheme);
      } catch (dontknow) {
        
      }
    }
</script>
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.aaronnotes.com/" aria-label="Go to homepage">aaron&#39;s notes</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://www.aaronnotes.com/#about" aria-label="Open the link: /#about">
    
    
    
      
        <img class="header-picture" src="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5/img/icons/boat.jpg" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.aaronnotes.com/#about" aria-label="Read more about the author">
          <img class="sidebar-profile-picture" src="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5/img/icons/boat.jpg" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">aaron</h4>
        
          <h5 class="sidebar-profile-bio">random notes</h5>
        
        
          <label id="switch" class="switch">
    <input type="checkbox" onchange="toggleTheme()" id="slider" aria-label="Switch between Dark and Light mode">
    <span class="slider round"></span>
</label>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/" title="Home">
    
      <i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/categories" title="Categories">
    
      <i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/tags" title="Tags">
    
      <i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/archives" title="Archives">
    
      <i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/index.xml" title="RSS">
    
      <i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/lijqhs" target="_blank" rel="noopener" title="GitHub">
    
      <i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/algorithms-notes" title="Algo Notes">
    
      <i class="sidebar-button-icon fas fa-lg fa-leaf" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Algo Notes</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/deeplearning-notes" title="DL Notes">
    
      <i class="sidebar-button-icon fas fa-lg fa-magic" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">DL Notes</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/data-science-notes" title="DS Notes">
    
      <i class="sidebar-button-icon fas fa-lg fa-cube" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">DS Notes</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.aaronnotes.com/#about" title="About">
    
      <i class="sidebar-button-icon fas fa-lg fa-rocket" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              "
       style="background-image:url('//cdn.jsdelivr.net/gh/lijqhs/cdn@1.5.2/img/gallery/u/1/ales-krivec-okzxVsJNxXc-unsplash.jpg')"
       data-behavior="4">
    
      <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title">
      Demystifying Yield in Python
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2023-04-22T00:00:00Z">
        
  April 22, 2023

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.aaronnotes.com/categories/python">python</a>
    
  

  </div>

</div>
    
  </div>


      <div id="main" data-behavior="4"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" id="top">
          
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>Python&rsquo;s <code>yield</code> statement is a powerful tool that can be used in a variety of contexts, including generator functions, coroutines, and asynchronous programming.</p>
<h1 id="table-of-contents">Table of Contents</h1>
<nav id="TableOfContents">
  <ul>
    <li><a href="#generators">Generators</a>
      <ul>
        <li><a href="#generator-expressions">Generator Expressions</a></li>
        <li><a href="#context-managers">Context Managers</a></li>
      </ul>
    </li>
    <li><a href="#yield-expressions"><code>yield</code> expressions</a></li>
    <li><a href="#generator-based-coroutines">Generator-based Coroutines</a></li>
    <li><a href="#native-coroutines">Native Coroutines</a>
      <ul>
        <li><a href="#async-def">async def</a></li>
        <li><a href="#await">await</a></li>
      </ul>
    </li>
    <li><a href="#asynchronous-generators">Asynchronous Generators</a></li>
    <li><a href="#asyncio">Asyncio</a>
      <ul>
        <li><a href="#key-features">Key features</a></li>
        <li><a href="#alternatives">Alternatives</a></li>
      </ul>
    </li>
    <li><a href="#related-references">Related References</a></li>
  </ul>
</nav>

<h2 id="generators">Generators</h2>
<p><code>yield</code> was introduced in Python 2.2 as a simple way to create generators (<a href="https://peps.python.org/pep-0255/">PEP 255</a>). Generators are functions that can pause their execution and return a value, then resume when <code>next</code> is called on them again. This &ldquo;pausing function&rdquo; functionality of <code>yield</code> enables some very powerful programming concepts in Python.</p>
<p>When a generator function is called, it returns a generator object that can be used to generate the values one at a time. Each time the <code>yield</code> statement is encountered in the generator function, the function is paused and the value following the <code>yield</code> keyword is returned. The next time the generator is called, execution resumes after the last <code>yield</code> statement.</p>
<p>Here&rsquo;s an example of a simple generator function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">double_gen</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        a <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> x
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> a
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;last value: </span><span style="color:#e6db74">{</span>a<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;, &#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>gen <span style="color:#f92672">=</span> double_gen(<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;curr value: </span><span style="color:#e6db74">{</span>next(gen)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>) 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># curr value: 0</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;curr value: </span><span style="color:#e6db74">{</span>next(gen)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>) 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># last value: 0, curr value: 2</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;curr value: </span><span style="color:#e6db74">{</span>next(gen)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>) 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># last value: 2, curr value: 4</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;curr value: </span><span style="color:#e6db74">{</span>next(gen)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>) 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Traceback (most recent call last):</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#   File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># StopIteration</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># last value: 4, </span>
</span></span></code></pre></div><ul>
<li>In this example, we define a generator function called <code>double_gen</code> that generates the doubles of the numbers from <code>0</code> to <code>n</code> using the <code>yield</code> keyword.</li>
<li>We then create a generator object called <code>gen</code> by calling the function. When <code>next()</code> is first invoked, it sets <code>a</code> to <code>0</code> and yields <code>a</code> back to its caller, where we print <code>curr value: 0</code>.</li>
<li>When <code>double_gen</code> is resumed, <code>double_gen</code> continues after the <code>yield</code> with local state intact, where we print <code>last value: 0, </code>, and <code>double_gen</code> loops back to the <code>yield</code>, yielding <code>2</code> (<code>a = 2 * 1</code>) to its invoker.</li>
<li>And so on, until the generator function runs out, at this point a <code>StopIteration</code> exception is raised.</li>
</ul>
<h3 id="generator-expressions">Generator Expressions</h3>
<p>In addition to using generator functions, generators can also be created using generator expressions (<a href="https://peps.python.org/pep-0289/">PEP 289</a>), which are similar to list comprehensions and return an generator instead of a list.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>gen <span style="color:#f92672">=</span> (x<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e"># print(gen)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &lt;generator object &lt;genexpr&gt; at 0x7fbd75d43ae0&gt;</span>
</span></span></code></pre></div><p>Generator expressions are essentially syntactic sugar for generators. They provide a concise way to create simple generators, but ultimately they compile down to the same generator objects that can be created using <code>def</code>. The above example is equivalent to:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">gen</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> x<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span>
</span></span></code></pre></div><h3 id="context-managers">Context Managers</h3>
<p><a href="https://www.aaronnotes.com/blog/posts/context-managers-in-python/">Context managers</a> are objects that define a context in which a set of operations can be performed. Context managers can be defined by <strong>generators</strong> using the <code>@contextmanager</code> decorator, in which case, <code>yield</code> keyword used in generator acts more like a separator between code entering and exiting the context manager.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> contextlib <span style="color:#f92672">import</span> contextmanager
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@contextmanager</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">file_opener</span>(filename, mode):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># entering context manager</span>
</span></span><span style="display:flex;"><span>        f <span style="color:#f92672">=</span> open(filename, mode)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> f
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># exiting context manager</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">finally</span>:
</span></span><span style="display:flex;"><span>        f<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><ul>
<li>In this example, we have defined a <code>file_opener</code> context manager using the <code>@contextmanager</code> decorator. The <code>file_opener</code> function is a generator function that yields a file object, which can be used by the calling code to read or write data to the file.</li>
<li>The <code>try</code> block in the <code>file_opener</code> function opens the file with the specified filename and mode. The <code>yield</code> statement produces the file object and temporarily suspends the generator function, allowing the calling code to resume execution. The calling code can use the file object to read or write data to the file.</li>
<li>The <code>finally</code> block in the <code>file_opener</code> function ensures that the file is closed properly when the context is exited, even if an exception occurs during execution.</li>
</ul>
<p>Here&rsquo;s an example of how you can use the <code>file_opener</code> context manager:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">with</span> file_opener(<span style="color:#e6db74">&#34;hello.txt&#34;</span>, <span style="color:#e6db74">&#34;w&#34;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>    f<span style="color:#f92672">.</span>write(<span style="color:#e6db74">&#34;Hello, world!&#34;</span>)
</span></span></code></pre></div><h2 id="yield-expressions"><code>yield</code> expressions</h2>
<p>Python 2.5 (<a href="https://peps.python.org/pep-0342/">PEP 342</a>) introduced methods and adjustments to <strong>use generators to implement coroutines</strong> and other forms of co-operative multitasking. The most interesting features were <code>yield</code> expression and <code>send()</code> method.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">guess</span>(n):
</span></span><span style="display:flex;"><span>    hint <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> <span style="color:#66d9ef">True</span>:
</span></span><span style="display:flex;"><span>        x <span style="color:#f92672">=</span> <span style="color:#66d9ef">yield</span> hint
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;</span> n:
</span></span><span style="display:flex;"><span>            hint <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;too big&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> x <span style="color:#f92672">&lt;</span> n:
</span></span><span style="display:flex;"><span>            hint <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;too small&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            hint <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;bingo&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> game <span style="color:#f92672">=</span> guess(<span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> game<span style="color:#f92672">.</span>send(<span style="color:#66d9ef">None</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> game<span style="color:#f92672">.</span>send(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;too small&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> game<span style="color:#f92672">.</span>send(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;too big&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;&gt;&gt;</span> game<span style="color:#f92672">.</span>send(<span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;bingo&#39;</span>
</span></span></code></pre></div><ul>
<li>In this example, first we call the generator function to define a generator <code>game = guess(5)</code> to play a guess number game with target number 5.</li>
<li>And then we call <code>game.send(None)</code> just like <code>next()</code> to advance the generator <code>guess</code> to the <code>yield</code> which will pause the execution and yield a <code>None</code> value.</li>
<li>After we call <code>game.send(1)</code>, the generator <code>guess</code> receives a value via <code>x = yield</code> (think it as <code>x = f()</code>, where the return value of <code>f()</code> is <code>1</code> which is sent by <code>game.send(1)</code>) and resumes its execution (executing <code>if-elif-else</code> block) until <code>yield hint</code> and returns local state <code>hint</code> to its caller <code>game.send(1)</code> (like <code>next()</code>), where <code>game.send(1)</code> returns <code>'too small'</code>.</li>
</ul>
<p>The <code>send()</code> method allows you to resume the execution of the generator or coroutine at the point where it left off, with a new value that is sent back into the generator or coroutine.</p>
<h2 id="generator-based-coroutines">Generator-based Coroutines</h2>
<p><code>yield</code> later gained additional power with the introduction of <code>yield from</code> (introduced in Python 3.3, <a href="https://peps.python.org/pep-0380/">PEP 380</a>). <code>yield from</code> allowed a generator to delegate to another generator or coroutine.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">double_gen</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">triple_gen</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">*</span> x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">delegate_gen</span>(n):
</span></span><span style="display:flex;"><span>    double_gen(n)
</span></span><span style="display:flex;"><span>    triple_gen(n)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> delegate_gen(<span style="color:#ae81ff">3</span>):
</span></span><span style="display:flex;"><span>    print(x)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># TypeError: &#39;NoneType&#39; object is not iterable</span>
</span></span></code></pre></div><ul>
<li>When we run the above code, we will get <code>TypeError</code> because the <code>delegate_gen</code> function is just a regular function in which only two generator objects are created.</li>
<li>Because when we call the generator functions, we simply get the generator object, not exactly call the functions in the normal way and we need to explicitly iterate generator again and again to re-yield values that it produces.</li>
<li>In this example <code>delegate_gen</code> doesn&rsquo;t have an <code>yield</code> statements so it cannot be used as generator in the <code>for</code> loop. And this regular function will return <code>None</code> as default, that&rsquo;s why we get <code>TypeError: 'NoneType' object is not iterable</code>.</li>
</ul>
<p>With <code>yield from</code> expression (the &ldquo;delegating generator&rdquo;), we can make <code>delegate_gen</code> a generator function.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">double_gen</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">triple_gen</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">*</span> x
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">delegate_gen</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">yield from</span> double_gen(n)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">yield from</span> triple_gen(n)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> delegate_gen(<span style="color:#ae81ff">3</span>):
</span></span><span style="display:flex;"><span>    print(x, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># prints: 0 2 4 0 3 6 </span>
</span></span></code></pre></div><p><code>yield from</code> simply provides a clean syntax to delegate control between coroutines, <strong>passing values back and forth</strong>. This enables powerful patterns like coroutine pipelines, trees, and more complex asynchronous algorithms built from simpler components.</p>
<p>With <code>async def</code> keyword we can define coroutines from generators:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> asyncio
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> delegate_gen(<span style="color:#ae81ff">3</span>):
</span></span><span style="display:flex;"><span>        print(x, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>asyncio<span style="color:#f92672">.</span>run(main())
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 0 2 4 0 3 6</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># main() is a coroutine</span>
</span></span></code></pre></div><p><strong>Caveats</strong>. According to the documentation <a href="https://docs.python.org/3.8/library/asyncio-task.html#generator-based-coroutines">Generator-based Coroutines</a>: Support for generator-based coroutines is deprecated and is scheduled for removal in Python 3.10. Use <code>async def</code> instead.</p>
<div class="alert info ">
  <p><p>Generator-based coroutines predate <code>async/await</code> syntax. They are Python generators that use <code>yield from</code> expressions to await on Futures and other coroutines.</p>
<p>Generator-based coroutines should be decorated with <code>@asyncio.coroutine</code>, although this is not enforced. This decorator enables legacy generator-based coroutines to be compatible with <code>async/await</code> code. This decorator should not be used for <code>async def</code> coroutines.</p>
</p>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#a6e22e">@asyncio.coroutine</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">old_style_coroutine</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">yield from</span> asyncio<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">await</span> old_style_coroutine()
</span></span></code></pre></div><h2 id="native-coroutines">Native Coroutines</h2>
<p>There are a number of shortcomings to implement coroutines via generators because with <code>yield</code> or <code>yield from</code>. For example, it is sometimes confusing to distinguish coroutines from regular generators. In Python 3.5 (<a href="https://peps.python.org/pep-0492/">PEP 492</a>) native coroutines and the associated new syntax features such as <code>async</code> and <code>await</code> were introduced.</p>
<h3 id="async-def">async def</h3>
<p>We can define a native coroutine with <code>async def</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">coro</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">pass</span>
</span></span></code></pre></div><p>Some key properties:</p>
<ul>
<li>Functions defined with <code>async def</code> are always coroutines, even if they do not contain <code>await</code> expressions.</li>
<li>It is a <code>SyntaxError</code> to have <code>yield</code> or <code>yield from</code> expressions in an <code>async</code> function. (<code>yield</code> can be used in <code>async</code> function, see <a href="https://peps.python.org/pep-0525/">PEP 525</a>)</li>
<li>Regular generators, when called, return a generator object; similarly, coroutines return a coroutine object.</li>
<li><code>StopIteration</code> exceptions are not propagated out of coroutines, and are replaced with a <code>RuntimeError</code>.</li>
<li><code>CO_COROUTINE</code> is used to mark native coroutines and <code>CO_ITERABLE_COROUTINE</code> is used to make generator-based coroutines compatible with native coroutines.</li>
</ul>
<h3 id="await">await</h3>
<p><code>await</code> uses the <code>yield from</code> implementation with an extra step of validating its argument. <code>await</code> only accepts an <code>awaitable</code>. There are three main types of <a href="https://docs.python.org/3/library/asyncio-task.html#awaitables">awaitable</a> objects: <strong>coroutines</strong>, <strong>Tasks</strong>, and <strong>Futures</strong>.</p>
<h2 id="asynchronous-generators">Asynchronous Generators</h2>
<p>In Python 3.6 (<a href="https://peps.python.org/pep-0525/">PEP 525</a>), the concept of asynchronous generators were introduced.</p>
<p>The asynchronous generator object is modeled after the standard Python generator object. Essentially, the behaviour of asynchronous generators is designed to replicate the behaviour of synchronous generators, with the only difference in that the API is asynchronous.</p>
<p>Asynchronous generators can be defined with <code>async def</code> and <code>yield</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> asyncio
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># an asynchronous generator function</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">double_coro</span>(n):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> range(n):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> x
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">await</span> asyncio<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><p>Asynchronous generators require an event loop to run and finalize them because they are meant to be used from coroutines and whereas an event loop or a scheduler is required to run coroutines. We can wrap it in a coroutine and run it with <code>asyncio.run</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> double_coro(<span style="color:#ae81ff">3</span>):
</span></span><span style="display:flex;"><span>        print(x, end<span style="color:#f92672">=</span><span style="color:#e6db74">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>asyncio<span style="color:#f92672">.</span>run(main())
</span></span><span style="display:flex;"><span><span style="color:#75715e"># prints: 0 2 4 </span>
</span></span></code></pre></div><p>For an asynchronous generator object <code>agen</code>, the following methods and properties are defined:</p>
<ul>
<li><code>agen.__aiter__()</code>: Returns <code>agen</code>.</li>
<li><code>agen.__anext__()</code>: Returns an <em>awaitable</em>, that performs one asynchronous generator iteration when awaited.</li>
<li><code>agen.asend(val)</code>: Returns an <em>awaitable</em>, that pushes the <code>val</code> object in the agen generator. When the <code>agen</code> has not yet been iterated, <code>val</code> must be <code>None</code>.</li>
</ul>
<h2 id="asyncio">Asyncio</h2>
<p><code>asyncio</code> is a Python library for asynchronous programming, introduced in Python 3.4 (<a href="https://peps.python.org/pep-3156/">PEP 3156</a>). It provides a way to write asynchronous, non-blocking code using coroutines, tasks, and event loops.</p>
<p>When the <code>asyncio</code> module was first released, it did not support the <code>async</code> and <code>await</code> syntax. Instead, it used the <code>yield from</code> syntax to define coroutines. Later, when the <code>async</code> and <code>await</code> syntax were introduced in Python 3.5, the <code>asyncio</code> module was updated to support this new syntax.</p>
<p>However, to ensure backwards compatibility with legacy code that was using the old <code>yield from</code> syntax, the <code>asyncio.coroutine</code> decorator function was introduced. Any legacy code that had a function that needed to be run concurrently (i.e. awaited) had to use this decorator function to make it compatible with the new <code>async</code> and <code>await</code> syntax.</p>
<p>In short, the <code>asyncio.coroutine</code> decorator function was a temporary solution to ensure that existing code that used the old <code>yield from</code> syntax could still be used with the new <code>async</code> and <code>await</code> syntax. It allowed developers to gradually transition their code to the new syntax. This feature has been deprecated since Python 3.8.</p>
<h3 id="key-features">Key features</h3>
<p><code>asyncio</code> provides a number of key features, including:</p>
<ul>
<li><a href="https://peps.python.org/pep-3156/#coroutines">Coroutines</a>: Coroutines can be defined using the <code>async def</code> syntax, and can use the <code>await</code> keyword to pause their execution until an asynchronous operation completes. Coroutines (and tasks) can only run when the event loop is running.</li>
<li><a href="https://peps.python.org/pep-3156/#tasks">Tasks</a>: A Task is an object that manages an independently running coroutine. The Task interface is the same as the Future interface, and in fact Task is a subclass of Future. Tasks are also useful for interoperating between coroutines and callback-based frameworks like Twisted. After converting a coroutine into a Task, callbacks can be added to the Task. To convert a coroutine into a task, call the coroutine function and pass the resulting coroutine object to the <code>loop.create_task()</code> method. You may also use <code>asyncio.ensure_future()</code> for this purpose.</li>
<li><a href="https://docs.python.org/3/library/asyncio-eventloop.html">Event Loop</a>: The event loop is the core of every asyncio application. Event loops run asynchronous tasks and callbacks, perform network IO operations, and run subprocesses. To get the event loop for current context, use <code>get_event_loop()</code>.</li>
<li><a href="https://peps.python.org/pep-3156/#futures">Futures</a>: <code>asyncio</code> uses futures to represent the result of an asynchronous operation that has not yet completed. Futures can be awaited like coroutines, and can be used to retrieve the result of an asynchronous operation once it completes.</li>
</ul>
<h3 id="alternatives">Alternatives</h3>
<p>Asyncio is just one of several Python libraries for asynchronous programming, each with its own strengths and weaknesses. Here&rsquo;s some of the other popular libraries for asynchronous programming in Python:</p>
<ul>
<li><a href="https://twisted.org/">Twisted</a>: Twisted is a Python-based open-source network framework that enables the creation of SMTP, HTTP, proxy, and SSH servers (among other things) with ease. It operates asynchronously and in an event-driven manner, enabling applications to react to various network connections without relying on conventional threading models.</li>
<li><a href="https://www.tornadoweb.org/en/stable/">Tornado</a>: Tornado is an asynchronous networking library and web framework for Python. Unlike many other Python web frameworks, Tornado doesn&rsquo;t rely on WSGI and typically only requires one thread per process to run.</li>
<li><a href="https://stackoverflow.com/questions/49482969/what-is-the-core-difference-between-asyncio-and-trio">Trio</a>: Trio is a contemporary Python library that facilitates the creation of asynchronous applications. These are programs that perform multiple tasks simultaneously by parallelizing I/O operations, such as a web spider that retrieves numerous pages concurrently or a web server managing several simultaneous downloads.</li>
<li><a href="https://github.com/dabeaz/curio">Curio</a>: Curio is a library for concurrent system programming in Python that operates using coroutines. It offers common programming abstractions like tasks, sockets, files, locks, and queues. It is a small, fast, and enjoyable library that should feel familiar to users.</li>
</ul>
<h2 id="related-references">Related References</h2>
<ul>
<li><a href="https://peps.python.org/pep-0255/">PEP 255 – Simple Generators</a></li>
<li><a href="https://peps.python.org/pep-0289/">PEP 289 – Generator Expressions</a></li>
<li><a href="https://peps.python.org/pep-0342/">PEP 342 – Coroutines via Enhanced Generators</a></li>
<li><a href="https://peps.python.org/pep-0380/">PEP 380 – Syntax for Delegating to a Subgenerator</a></li>
<li><a href="https://peps.python.org/pep-3156/">PEP 3156 – Asynchronous IO Support Rebooted: the “asyncio” Module</a></li>
<li><a href="https://peps.python.org/pep-0492/">PEP 492 – Coroutines with async and await syntax</a></li>
<li><a href="https://peps.python.org/pep-0525/">PEP 525 – Asynchronous Generators</a></li>
<li><a href="https://docs.python.org/3/library/asyncio-task.html">Coroutines and Tasks</a></li>
<li><a href="https://mleue.com/posts/yield-to-async-await/">From yield to async/await</a></li>
<li><a href="https://www.integralist.co.uk/posts/python-generators/">Python 101: iterators, generators, coroutines</a></li>
<li><a href="https://bbc.github.io/cloudfit-public-docs/asyncio/asyncio-part-3.html">Asynchronous Context Managers and Asynchronous Iterators</a></li>
</ul>
              


            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/python/">python</a>

  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/yield/">yield</a>

  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/generator/">generator</a>

  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/coroutine/">coroutine</a>

  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/asyncio/">asyncio</a>

  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/async/">async</a>

  <a class="tag tag--primary tag--small" href="https://www.aaronnotes.com/tags/asynchronous-programming/">asynchronous programming</a>

                  </div>
                
              
            
            
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://www.aaronnotes.com/2023/04/caching-in-python/" data-tooltip="An Introduction to Caching in Python" aria-label="NEXT: An Introduction to Caching in Python">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://www.aaronnotes.com/2023/04/deploy-nodejs-using-pm2/" data-tooltip="如何使用PM2部署Node.js应用" aria-label="PREVIOUS: 如何使用PM2部署Node.js应用">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://wa.me/?text=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Whatsapp" aria-label="Share on Whatsapp">
          <i class="fab fa-whatsapp" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Linkedin" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.reddit.com/submit?url=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Reddit" aria-label="Share on Reddit">
          <i class="fab fa-reddit" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://getpocket.com/edit?url=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Pocket" aria-label="Share on Pocket">
          <i class="fab fa-get-pocket" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


            
  


          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2023 <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a> 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://www.aaronnotes.com/2023/04/caching-in-python/" data-tooltip="An Introduction to Caching in Python" aria-label="NEXT: An Introduction to Caching in Python">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://www.aaronnotes.com/2023/04/deploy-nodejs-using-pm2/" data-tooltip="如何使用PM2部署Node.js应用" aria-label="PREVIOUS: 如何使用PM2部署Node.js应用">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://wa.me/?text=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Whatsapp" aria-label="Share on Whatsapp">
          <i class="fab fa-whatsapp" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Linkedin" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.reddit.com/submit?url=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Reddit" aria-label="Share on Reddit">
          <i class="fab fa-reddit" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://getpocket.com/edit?url=https://www.aaronnotes.com/2023/04/demystifying-yield-in-python/" title="Share on Pocket" aria-label="Share on Pocket">
          <i class="fab fa-get-pocket" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


      </div>
      
<div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-times"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.aaronnotes.com%2F2023%2F04%2Fdemystifying-yield-in-python%2F" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fwww.aaronnotes.com%2F2023%2F04%2Fdemystifying-yield-in-python%2F" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://wa.me/?text=https%3A%2F%2Fwww.aaronnotes.com%2F2023%2F04%2Fdemystifying-yield-in-python%2F" aria-label="Share on Whatsapp">
          <i class="fab fa-whatsapp" aria-hidden="true"></i><span>Share on Whatsapp</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.aaronnotes.com%2F2023%2F04%2Fdemystifying-yield-in-python%2F" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i><span>Share on Linkedin</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.reddit.com/submit?url=https%3A%2F%2Fwww.aaronnotes.com%2F2023%2F04%2Fdemystifying-yield-in-python%2F" aria-label="Share on Reddit">
          <i class="fab fa-reddit" aria-hidden="true"></i><span>Share on Reddit</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://getpocket.com/edit?url=https%3A%2F%2Fwww.aaronnotes.com%2F2023%2F04%2Fdemystifying-yield-in-python%2F" aria-label="Share on Pocket">
          <i class="fab fa-get-pocket" aria-hidden="true"></i><span>Share on Pocket</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>


    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="https://cdn.jsdelivr.net/gh/lijqhs/cdn@1.5/img/icons/boat.jpg" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">aaron</h4>
    
      <div id="about-card-bio">random notes</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        software developer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker-alt"></i>
        <br/>
        canada
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://www.aaronnotes.com/images/cover.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js" integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>



<script src="https://www.aaronnotes.com/js/script-5b445f02e95311ed96856c96cfde1fd94e6226e8e95311ed94146c96cfde1fd9.min.js"></script>


  
    <script async crossorigin="anonymous" defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js"></script>
  


<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>







    
  </body>
</html>

